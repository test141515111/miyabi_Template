# 知識マップ表示 - Knowledge Graph View

**役割**: Permanent Notes全体の知識ネットワークを可視化（Obsidian Graph View代替）

**思想**: 知識は孤立ではなくネットワークで価値を持つ

---

## ミッション

全Permanent Notesのリンク構造を分析し、以下を可視化：

1. ノード = Permanent Note
2. エッジ = Wikiリンク [[ノート名]]
3. クラスター = 関連する知識群
4. ハブノート = 中心的なノート（多くのリンク）
5. 孤立ノート = 接続が弱いノート

---

## 実行プロセス

### 1. 表示モード選択

```
どの表示モードで知識マップを生成しますか？

1. 全体マップ - 全ノートの関係性
2. カテゴリ別 - タグでフィルタ
3. 深度指定 - 特定ノートからN-ホップ
4. ハブ分析 - 中心的ノードの特定
5. 孤立検出 - 接続が弱いノート発見

選択: [1-5]
```

### 2. グラフ生成

#### モード1: 全体マップ

```typescript
function generateFullKnowledgeMap(): string {
  const allNotes = getAllPermanentNotes();
  const edges: {from: string, to: string}[] = [];

  allNotes.forEach(note => {
    note.links.forEach(link => {
      edges.push({from: note.id, to: link});
    });
  });

  return generateMermaidGraph(edges);
}
```

**出力例**:

```markdown
# 知識マップ - 全体表示

## 統計情報
- ノート総数: 42
- リンク総数: 156
- 平均リンク密度: 6.2
- クラスター数: 5
- 孤立ノート数: 3

---

## グラフ表示

\`\`\`mermaid
graph TD
    A[抽象化思考] --> B[DIKWモデル]
    A --> C[コンテキストエンジニアリング]
    A --> D[メモの魔力]

    B --> E[データ]
    B --> F[情報]
    B --> G[知識]
    B --> H[知恵]

    C --> I[Cursor活用法]
    C --> J[LLM推論エンジン]

    D --> K[Fact]
    D --> L[Abstraction]
    D --> M[Application]

    I --> N[記事執筆]
    I --> O[コード生成]

    J --> C
    L --> G

    %% ハブノート（リンク数6+）を強調
    style A fill:#FFD700
    style C fill:#FFD700
    style B fill:#87CEEB

    %% 孤立ノート（リンク数2以下）を警告
    style N fill:#FF6B6B
    style O fill:#FF6B6B
\`\`\`

---

## クラスター分析

### クラスター1: AI×知的生産（12ノート）
- [[コンテキストエンジニアリング]]（ハブ）
- [[抽象化思考]]（ハブ）
- [[Cursor活用法]]
- [[LLM推論エンジン]]
- ...

### クラスター2: 思考フレームワーク（8ノート）
- [[DIKWモデル]]
- [[メモの魔力]]
- [[SCQAフレームワーク]]
- ...

### クラスター3: 実践・転用（6ノート）
- [[記事執筆]]
- [[コード生成]]
- ...

---

## 警告: 孤立ノート

以下のノートは孤立状態です（要対応）：

1. **[[記事執筆]]** - リンク数: 1
   - 推奨: [[Cursor活用法]], [[コンテキストエンジニアリング]]とリンク

2. **[[コード生成]]** - リンク数: 1
   - 推奨: [[Cursor活用法]], [[実践ガイド]]とリンク

3. **[[農耕民vs狩猟民]]** - リンク数: 2
   - 推奨: [[長期思考]], [[知的資産構築]]とリンク
```

#### モード2: カテゴリ別

```
カテゴリ別で知識マップを生成します。

タグを指定してください（例: #ai-optimization, #knowledge-management）：
> #ai-optimization
```

**出力例**:

```markdown
# 知識マップ - カテゴリ別: #ai-optimization

## 統計情報
- 該当ノート数: 12
- 平均リンク密度: 7.8
- クラスター内密度: 高

---

## グラフ表示

\`\`\`mermaid
graph TD
    A[コンテキストエンジニアリング] --> B[Cursor活用法]
    A --> C[LLM推論エンジン]
    A --> D[プロンプティング技法]

    B --> E[記事執筆]
    B --> F[コード生成]

    C --> A
    C --> G[推論品質向上]

    D --> H[論理7:感性3]

    style A fill:#FFD700
\`\`\`
```

#### モード3: 深度指定

```
深度指定で知識マップを生成します。

開始ノートのパスを指定してください：
> knowledge/permanent-notes/コンテキストエンジニアリング.md

深度（ホップ数）を指定してください（1-3推奨）：
> 2
```

**出力例**:

```markdown
# 知識マップ - 深度2: コンテキストエンジニアリング

## 探索結果
- 1-ホップ先: 5ノート
- 2-ホップ先: 12ノート
- 総ノート数: 17

---

## グラフ表示

\`\`\`mermaid
graph TD
    START[コンテキストエンジニアリング] --> H1A[Cursor活用法]
    START --> H1B[LLM推論エンジン]
    START --> H1C[抽象化思考]

    H1A --> H2A[記事執筆]
    H1A --> H2B[コード生成]

    H1B --> H2C[推論品質向上]

    H1C --> H2D[DIKWモデル]
    H1C --> H2E[メモの魔力]

    style START fill:#FFD700
    style H1A fill:#87CEEB
    style H1B fill:#87CEEB
    style H1C fill:#87CEEB
\`\`\`
```

#### モード4: ハブ分析

```
ハブ分析を実行します...
```

**出力例**:

```markdown
# 知識マップ - ハブ分析

## Top 10 ハブノート（リンク数順）

### 1. コンテキストエンジニアリング（18リンク）
- 発リンク: 8
- 被リンク: 10
- **役割**: AI×知的生産の中心ノード

### 2. 抽象化思考（15リンク）
- 発リンク: 6
- 被リンク: 9
- **役割**: 思考フレームワークの基礎

### 3. DIKWモデル（12リンク）
- 発リンク: 4
- 被リンク: 8
- **役割**: 知識階層の理論的基盤

（以下略）

---

## ハブノートの可視化

\`\`\`mermaid
graph TD
    HUB1[コンテキストエンジニアリング<br/>18リンク] --> N1[Cursor活用法]
    HUB1 --> N2[LLM推論エンジン]
    HUB1 --> N3[プロンプティング技法]

    HUB2[抽象化思考<br/>15リンク] --> N4[DIKWモデル]
    HUB2 --> N5[メモの魔力]

    HUB3[DIKWモデル<br/>12リンク] --> N6[データ]
    HUB3 --> N7[情報]

    style HUB1 fill:#FFD700
    style HUB2 fill:#FFD700
    style HUB3 fill:#FFD700
\`\`\`

---

## 推奨アクション

**ハブノートの強化**:
- ハブノートは知識ネットワークの要
- 定期的に内容を更新・拡充
- 新しいノートとの接続を積極的に追加

**新規ハブノートの候補**:
- [[実践ガイド]] - 現在リンク数5、ハブ候補
- [[問題解決フレームワーク]] - 現在リンク数4、ハブ候補
```

#### モード5: 孤立検出

```
孤立ノート検出を実行します...
```

**出力例**:

```markdown
# 知識マップ - 孤立ノート検出

## 孤立度レベル

### 🔴 深刻（リンク数0-1）: 要緊急対応

1. **[[Visual Zettelkasten]]**
   - リンク数: 0
   - 作成日: 2025-09-20
   - **推奨リンク**:
     - [[二重符号化理論]]
     - [[図解思考]]
     - [[Mermaid活用法]]

---

### 🟡 警告（リンク数2-3）: 早期対応推奨

2. **[[農耕民vs狩猟民]]**
   - リンク数: 2
   - **推奨リンク**:
     - [[長期思考]]
     - [[知的資産構築]]
     - [[複利効果]]

3. **[[記事執筆]]**
   - リンク数: 1
   - **推奨リンク**:
     - [[Cursor活用法]]
     - [[コンテキストエンジニアリング]]

---

### 🟢 良好（リンク数4-5）: 経過観察

4. **[[SCQAフレームワーク]]**
   - リンク数: 4
   - 現状は良好、さらに1-2リンク追加で理想的

---

## グラフ表示（孤立ノード強調）

\`\`\`mermaid
graph TD
    ISOLATED1[Visual Zettelkasten] -.孤立.-> NULL1[ ]
    ISOLATED2[農耕民vs狩猟民] --> WEAK1[複利効果]
    ISOLATED3[記事執筆] --> WEAK2[Cursor活用法]

    GOOD[SCQAフレームワーク] --> L1[コンテキストエンジニアリング]
    GOOD --> L2[問題解決]
    GOOD --> L3[プレゼン技法]

    style ISOLATED1 fill:#FF6B6B
    style ISOLATED2 fill:#FFD700
    style ISOLATED3 fill:#FFD700
    style GOOD fill:#98FB98
\`\`\`

---

## 自動リンク提案

各孤立ノートに対して、最も関連性の高いノートを提案：

### Visual Zettelkasten
1. [[二重符号化理論]]（類似度: 0.89）
2. [[図解思考]]（類似度: 0.85）
3. [[Mermaid活用法]]（類似度: 0.82）

### 農耕民vs狩猟民
1. [[長期思考]]（類似度: 0.91）
2. [[知的資産構築]]（類似度: 0.87）
3. [[複利効果]]（類似度: 0.84）
```

---

## 高度な機能

### 1. 時系列での知識成長可視化

```markdown
## 知識ネットワークの成長推移

\`\`\`mermaid
graph LR
    M1["2025年9月<br/>ノート: 28<br/>リンク: 84"] --> M2["2025年10月<br/>ノート: 42<br/>リンク: 156"]
    M2 --> M3["2025年11月<br/>ノート: ?<br/>リンク: ?"]

    style M2 fill:#FFD700
\`\`\`

### リンク密度の推移

\`\`\`mermaid
graph LR
    S1[9月: 3.0] --> S2[10月: 6.2]
    S2 --> S3[目標: 8.0]

    style S2 fill:#FFD700
\`\`\`
```

### 2. クラスター間接続の分析

```markdown
## クラスター間接続の強度

\`\`\`mermaid
graph TD
    C1[AI×知的生産<br/>12ノート] -.弱.-> C2[思考フレームワーク<br/>8ノート]
    C1 -.強.-> C3[実践・転用<br/>6ノート]
    C2 -.中.-> C3

    style C1 fill:#FFD700
    style C2 fill:#87CEEB
    style C3 fill:#98FB98
\`\`\`

**推奨アクション**:
- C1とC2の接続を強化（現在: 2リンクのみ）
- ブリッジノートの作成を検討
```

### 3. 双方向リンク分析

```markdown
## 双方向リンク分析

### 統計
- 双方向リンク率: 72%
- 片方向のみ: 28%（改善余地）

### 片方向リンクの例

**[[コンテキストエンジニアリング]] → [[Cursor活用法]]**
- 逆方向リンクなし
- **推奨**: [[Cursor活用法]]からも[[コンテキストエンジニアリング]]へリンク

**[[抽象化思考]] → [[DIKWモデル]]**
- 逆方向リンクあり ✅
```

---

## メトリクス

### 知識ネットワークの健全性スコア

```
総合スコア: 78/100

✅ 良好な点:
- 平均リンク密度が高い（6.2）
- 双方向リンク率が良好（72%）
- ハブノートが適切に分散

⚠️ 改善点:
- 孤立ノートが3件存在
- クラスター間の接続が弱い
- リンク密度のばらつきが大きい
```

### 目標指標
- **平均リンク密度**: 6+ （現在: 6.2） ✅
- **孤立ノート数**: 0件 （現在: 3件） ⚠️
- **双方向リンク率**: 80%+ （現在: 72%） ⚠️
- **クラスター密度**: 適切 ✅

---

## 次のステップ

知識マップ確認後、以下のアクションを推奨：

1. `/link-notes all` - 全ノートに対してリンク提案を実行
2. `/reflect` - 月次レビューでリンク構造を改善
3. `/visualize` - 個別クラスターを詳細に可視化
4. `/permanent-note` - ブリッジノートを作成（クラスター間接続）

---

**実装**: Claude Code + TypeScript + Mermaid
**依存**: Permanent Notes全体
**出力先**: knowledge/maps/knowledge-graph.md
